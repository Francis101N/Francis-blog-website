<header class="bg-white bg-opacity-95 shadow-md">
  <div class="max-w-7xl mx-auto flex justify-between items-center px-6 py-4">
    
    <!-- Logo / Branding -->
    <h1 class="text-3xl font-extrabold tracking-wide flex items-center gap-2">
      ✨ <span class="bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-pink-500">MyBlog</span>
    </h1>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex space-x-8 text-lg font-medium">
      <a href="/" class="relative text-gray-800 hover:text-yellow-400 transition">Home</a>
      <a href="/categories" class="relative text-gray-800 hover:text-yellow-400 transition">Categories</a>
      <a href="/about" class="relative text-gray-800 hover:text-yellow-400 transition">About</a>
      <a href="/contact" class="relative text-gray-800 hover:text-yellow-400 transition">Contact</a>
    </nav>

    <!-- Right Side: Profile / Login -->
    <div class="flex items-center gap-4">
      <% if (user) { %>
        <!-- Profile + Dropdown -->
        <div class="relative hidden md:block">
          <button onclick="toggleDropdown()" 
                  class="flex items-center gap-2 focus:outline-none">
            <img src="/uploads/<%= user.profilePhoto || '/IMAGES/fran.png' %>" 
                 alt="Profile" 
                 class="w-10 h-10 rounded-full border-2 border-yellow-400 shadow-md">
            <span class="font-semibold text-gray-700">
              <%= user.names %>
            </span>
            <svg xmlns="http://www.w3.org/2000/svg" 
                 class="h-5 w-5 text-gray-600" 
                 fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M19 9l-7 7-7-7" />
            </svg>
          </button>

          <!-- Dropdown Menu -->
          <div id="dropdownMenu" 
               class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg hidden">
            <a href="/profile" 
               class="block px-4 py-2 text-gray-700 hover:bg-yellow-100 transition">
              Profile
            </a>
            <a href="/change-password" 
               class="block px-4 py-2 text-gray-700 hover:bg-yellow-100 transition">
              Change Password
            </a>
            <a href="/logout" 
               class="block px-4 py-2 text-red-600 hover:bg-red-100 transition"
               onclick="return confirm('Are you sure you want to Logout ?')">
              Logout
            </a>
          </div>
        </div>
      <% } else { %>
        <!-- Login Button -->
        <a href="/login" 
           class="hidden md:inline-block bg-yellow-400 text-indigo-900 font-semibold px-5 py-2 rounded-full shadow-md hover:bg-yellow-300 hover:shadow-yellow-300/50 transition duration-300">
           Login
        </a>
      <% } %>
    </div>

    <!-- Mobile Menu Button -->
    <button id="menu-btn" class="md:hidden text-gray-800 text-3xl focus:outline-none">
      ☰
    </button>
  </div>

  <!-- Mobile Dropdown Menu -->
  <div id="menu" class="hidden md:hidden bg-white text-gray-800 shadow-lg flex flex-col space-y-4 px-6 py-4">
    <a href="/" class="hover:text-yellow-400 transition">Home</a>
    <a href="/categories" class="hover:text-yellow-400 transition">Categories</a>
    <a href="/about" class="hover:text-yellow-400 transition">About</a>
    <a href="/contact" class="hover:text-yellow-400 transition">Contact</a>

    <% if (user) { %>
      <div class="flex flex-col items-center gap-4">
        <img src="/uploads/<%= user.profilePhoto || 'IMAGES/fran.png' %>" 
             alt="Profile" 
             class="w-16 h-16 rounded-full border-2 border-yellow-400 shadow-md">
        <span class="font-semibold"><%= user.names %></span>
      </div>
      <a href="/change-password" class="px-4 py-2 text-center text-gray-700 hover:bg-yellow-100 rounded-lg transition">Change Password</a>
      <a href="/logout" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition text-center"
         onclick="return confirm('Are you sure you want to Logout ?')">Logout</a>
    <% } else { %>
      <a href="/login" class="bg-yellow-400 text-indigo-900 px-4 py-2 rounded-lg font-semibold hover:bg-yellow-300 hover:shadow-yellow-300/50 transition text-center">Login</a>
    <% } %>
  </div>
</header>

<script>
  function toggleDropdown() {
    const menu = document.getElementById("dropdownMenu");
    menu.classList.toggle("hidden");
  }

  // Mobile menu toggle
  document.getElementById("menu-btn").addEventListener("click", () => {
    document.getElementById("menu").classList.toggle("hidden");
  });

   function toggleDropdown() {
    const menu = document.getElementById("dropdownMenu");
    menu.classList.toggle("hidden");
  }

  // Close dropdown if clicked outside
  window.addEventListener("click", function(e) {
    const dropdown = document.getElementById("dropdownMenu");
    const button = e.target.closest("button");

    if (dropdown && !dropdown.contains(e.target) && !button) {
      dropdown.classList.add("hidden");
    }
  });
</script>
